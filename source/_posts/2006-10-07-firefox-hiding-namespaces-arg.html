---
layout: post
title: "Firefox Hiding Namespaces! ARG."
date: 2006-10-07T13:49:00-07:00
---

<div class='post'>
<span style="color: rgb(51, 51, 255);font-size:180%;" >{</span><br /><br />For a while I've had people ask me how I did my <a href="http://hobbitwerk.brinkster.net/phoDak">photoblog</a> and because I wrote it from scratch it's not really useful (and it's definitely "Me-ware": unusable to just about anyone but me).  I always direct people towards Flickr but it doesn't have the photoblog experience quite like mine and other photoblogs.<br /><br />This weekend I've been writing a tool called Flickr-Fu that grabs the RSS feed from Flickr and attempts to simulate the photoblog experience allowing a user to navigate forward and backward one photograph at a time.  The RSS xml structure is extended by Yahoo with it's own namespace: http://search.yahoo.com/mrss - all such tags are given a "media" prefix to distinguish them from the structure of RSS 2.0. Using XPaths with .NET is pretty straight forward until you run into the namespace issue, at which point there is a class XmlNamespaceManager that you will need to tame in order to get the job done.<br /><br />But before this point I was hitting my head against a wall: I could see the media:content tag that I needed to get the image URL but I could see no namespace associated with it!  It doesn't follow as well-formed XML to have namespaces without some namespace URI but sure enough, Firefox was hiding the namespace URI. I pasted to IE and was able to get a proper reference to use with the XmlNamespaceManager.  What a strange thing to display XML in a stylesheet but leave off the namespace references in the root element!  Just to prove I'm not hallucinating, here's a screen cap:<br /><br /><div><br /><img src="http://hobbitwerk.brinkster.net/images/NamespaceIssues.jpg" style="border: 9px solid white;" /><br /></div><br />Once the namespace issue was cleared up for me, the code was quite simple:<br /><br /><!-- {\rtf1\ansi\ansicpg\lang1024\noproof1252\uc1 \deff0{\fonttbl{\f0\fnil\fcharset0\fprq1 Courier New;}}{\colortbl;\red0\green0\blue0;\red0\green0\blue255;\red0\green255\blue255;\red0\green255\blue0??;\red255\green0\blue255;\red255\green0\blue0;\red255\green255\blue0;\red255\green255\blue255;??\red0\green0\blue128;\red0\green128\blue128;\red0\green128\blue0;??\red128\green0\blue128;\red128\green0\blue0;\red128\green128\blue0;\red128\green128\blue128;??\red192\green192\blue192;}??\fs20 XmlNamespaceManager spaceManager = \cf2 new\cf0  XmlNamespaceManager(doc.NameTable);\par ??spaceManager.AddNamespace(\cf13 "media"\cf0 , \cf13 "http://search.yahoo.com/mrss"\cf0 );\par ??linkToBig = xnItem.SelectSingleNode(\cf13 "media:content/@url"\cf0 , spaceManager).InnerText;} --><br /><div    style="background: white none repeat scroll 0% 50%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;font-family:Courier New;font-size:10pt;color:black;"><br /><p style="margin: 0px;"><span style="color: rgb(43, 145, 175);">   21</span> XmlNamespaceManager spaceManager = <span style="color:blue;">new</span> XmlNamespaceManager(doc.NameTable);</p><br /><p style="margin: 0px;"><span style="color: rgb(43, 145, 175);">   22</span> spaceManager.AddNamespace(<span style="color:maroon;">"media"</span>, <span style="color:maroon;">"http://search.yahoo.com/mrss"</span>);</p><br /><p style="margin: 0px;"><span style="color: rgb(43, 145, 175);">   23</span> linkToBig = xnItem.SelectSingleNode(<span style="color:maroon;">"media:content/@url"</span>, spaceManager).InnerText;</p><br /></div><br />Flickr-Fu is a work in progress but you can have a look <a href="http://hobbitwerk.brinkster.net/FlickrFu">here</a>.<br /><br /><span style="color: rgb(51, 51, 255);font-size:180%;" >} </span></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Aaron Johnson</div>
<div class='content'>
I spent way more time than I should have tonight trying to find a reason why Firefox does that to no avail. Anyway, if don't want to have to fire up IE, you can see the namespace declarations by using the view-source keyword in front of your URL in Firefox like so:<BR/><BR/>view-source:http://cephas.net/blog/feed/<BR/><BR/>AJ</div>
</div>
</div>
