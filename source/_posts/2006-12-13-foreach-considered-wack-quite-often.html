---
layout: post
title: "foreach Considered Wack Quite Often"
date: 2006-12-13T07:52:00-08:00
---

<div class='post'>
<span style="font-size:180%;color:#3333ff;">{</span><br /><br />Don't get me wrong, it's not a jihad I have against the <span style="color:#3333ff;">foreach</span> in C#, it's just the fact that if I had a nickel (okay, a quarter to be realistic) for each time I changed a <span style="color:#3333ff;">foreach</span> to a normal <span style="color:#3333ff;">for</span> loop because I needed to track my position as I iterated through a collection and no underlying index was provided, I'd have enough money for coffee each week.<br /><br />A simple example from the .NET world is the DataTable; when you iterate the Rows collection, the Rows don't expose an index. After seduction for the easy <span style="color:#3333ff;">foreach</span>, I end up with:<br /><br /><span style="font-family:courier new;">for(int i=0;i&lt;myTable.Rows.Count;i++){}</span><br /><br />There's only one time that a normal <span style="color:#3333ff;">for</span> loop got the better of me - I had to iterate and remove items from the collection. Modifying a collection that you're going through causes trouble but it's easily remedied - not with recursion as some would have it, but by simply going backward:<br /><br /><span style="font-family:courier new;">for(int i=myTable.Rows.Count -1;i&gt;-1;i--){}</span><br /><br />Besides its syntactic elegance, of what benefit is the foreach? By calling the underlying enumerator?<br /><br /><span style="font-size:180%;color:#3333ff;">}</span></div>
