---
layout: post
title: "Comment Spam Begone"
date: 2007-12-04T21:44:00-08:00
---

<div class='post'>
<h1><font color="#0000ff">{</font></h1> <p>I maintain a few personal websites, one of the closest to my heart is <a href="http://hobbitwerk.brinkster.net/phoDak">phoDak</a>, a photoblog.&nbsp; I wrote the site using ASP.NET about two years ago and intended it to be a low key, personal area to post pictures.&nbsp; I had absolutely no validation on comments and my "what will be" attitude worked for a long time until about a week ago when I saw a comment spam link to porn right off the most recent picture.&nbsp; No longer avoidable, I looked into a few ways to block unwanted comments and came up with a hybrid approach: </p> <p>1. Use a photo/word as validation for a human user, just like <a href="http://www.codinghorror.com/blog/">Jeff Atwood's</a> blog.<br>2. I heard about <a href="http://akismet.com/">Akismet</a> from Phil Haack who mentioned it in passing on a Dot Net Rocks episode. I found a <a href="http://www.arnebrachhold.de/2006/04/18/akismet-anti-spam-library-for-the-dotnet-framework/">free library</a> and wrote about 10 lines of code:</p><pre style="padding-right: 10px; padding-left: 10px; font-size: 8pt; background: #000; padding-bottom: 10px; margin: 1em 0px; overflow: auto; width: 500px; color: #eee; padding-top: 10px; font-family: verdana">AkismetManager akismetManager = <br />	new AkismetManager("my key", "my site");<br />string ip = <br />	Request.ServerVariables["REMOTE_ADDR"].ToString();<br />if(akismetManager.IsValidKey()){<br />	AkismetItem item = <br />		new AkismetItem(ip, Request.UserAgent.ToString());<br />	item.AuthorName = <br />		CommentOwnerTextbox.Text;<br />	item.AuthorUrl = <br />		CommentURLTextbox.Text;<br />	item.Content = <br />		CommentTextbox.Text;<br />	if(akismetManager.IsSpam(item)){<br />		akismetManager.SubmitSpam(item);<br />		return;<br />	}<br />}<br /></pre><br /><p>Q.E.D., really. Somewhat Mort-ish for me to lean solely on the library but it works beautifully: my spam comments since implementation remain at absolute zero.</p><br /><h1><font color="#0000ff">}</font></h1>  </div>
