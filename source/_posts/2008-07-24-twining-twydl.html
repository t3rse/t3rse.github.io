---
layout: post
title: "Twining, TwyDL"
date: 2008-07-24T21:35:00-07:00
---

<div class='post'>
<h1><font color="#0000ff">{</font></h1>  <p>A quick note that <a href="http://www.t3rse.com/twining">Twining</a> isn't dead and that I actually have been working on it. Some work I've done in the past few months has involved a lot of databases I don't have more than an ISPs user/password level of access to so it's been quite handy to copy data in and out with brief pieces of code. Here's one feature I've used, exporting a table definition and all of its contents to a scripted insert statement in a file: </p>  <pre style="padding-right: 10px; padding-left: 10px; font-size: 12pt; background: #000; padding-bottom: 10px; margin: 1em 0px; overflow: auto; color: #eee; line-height: 120%; padding-top: 10px; font-family: courier">database(cn).table(&quot;MY_TABLE&quot;).copyto.script(&quot;c:\\temp\\MY_SCRIPT.sql&quot;)</pre><br /><br /><p>&#160;</p><br /><br /><p>Another piece that I've been working on is the ability to generate schema objects in a more fluid, compact way. I like SQL just fine but after seeing how easy it is to make data structures with the Google App Engine I sought to shoot for something similar. Also within the flow of writing a Twining script it's easy to keep this type of syntax Pythonic for certain scenarios (you want to create a temp table and dump data into it from somewhere; you want to create a table and generate sample data, etc, etc). I call it TwyDL as a play on <a href="http://en.wikipedia.org/wiki/Drop_(SQL)">DDL</a>: </p><br /><br /><pre style="padding-right: 10px; padding-left: 10px; font-size: 12pt; background: #000; padding-bottom: 10px; margin: 1em 0px; overflow: auto; color: #eee; line-height: 120%; padding-top: 10px; font-family: courier">database(cn).create.table(&quot;Employees&quot;, <br />                               [<br />                                   col.ident(&quot;EmployeeID&quot;), <br />                                   col.string(&quot;FirstName&quot;), <br />                                   col.string(&quot;LastName&quot;), <br />                                   col.numeric(&quot;Salary&quot;)<br />                               ]<br />                          )</pre><br /><br /><p>&#160;</p><br /><br /><p>The methods you see for defining column types take optional parameters so you can pass additional specifications when you feel the need. For example, the string columns default to varchar(50) but if you wanted to have a specific length all you'd need to do is: </p><br /><br /><pre style="padding-right: 10px; padding-left: 10px; font-size: 12pt; background: #000; padding-bottom: 10px; margin: 1em 0px; overflow: auto; color: #eee; line-height: 120%; padding-top: 10px; font-family: courier">col.string(&quot;FirstName&quot;, 25)</pre><br /><br /><p>The same is true for numeric types: </p><br /><br /><pre style="padding-right: 10px; padding-left: 10px; font-size: 12pt; background: #000; padding-bottom: 10px; margin: 1em 0px; overflow: auto; color: #eee; line-height: 120%; padding-top: 10px; font-family: courier">col.numeric(&quot;Salary&quot;, 18, 4)</pre><br /><br /><p>I've got one more thing I'm interested in implementing (time! time!) which is generating sample data given some table definition. I'm hoping to get up a rough cut of it all in the next day or two, after I've updated unit tests and organized things.</p><br /><br /><h1><font color="#0000ff">}</font></h1>  </div>
