---
layout: post
title: "Primes, Sums of Primes, 2011 in C#"
date: 2011-01-29T19:07:00-08:00
---

<div class='post'>
<h3><font color="#0000ff">{</font></h3>  <p>I had no idea: </p>  <p><font size="5">2011 = 157 + 163 + 167 + 173 + 179 + 181 + 191 + 193 + 197 + 199 + 211</font></p>  <p>After learning that not only was 2011 was prime, but that it was the sum of consecutive primes, I sought to write some C# code that would demonstrate this. I wrote it in a functional style, meaning at some point to port it to F# â€“ you'll recognize my in a forthcoming post on computing primes with F# which is actually an implementation of the algorithm I first worked through in the below C#. </p>  <pre style="padding-bottom: 10px; line-height: 120%; margin: 1em 0px; padding-left: 10px; padding-right: 10px; font-family: courier; background: #000; color: #eee; font-size: 8pt; overflow: auto; padding-top: 10px">Func&lt;long[], IEnumerable&lt;KeyValuePair&lt;long, string&gt;&gt;&gt; GenerateConsecutivePrimeSums = (primes) =&gt;<br />{<br />	List&lt;KeyValuePair&lt;long, string&gt;&gt; primeSums = new List&lt;KeyValuePair&lt;long, string&gt;&gt;();<br />	for (int i = 0; i &lt; primes.Count(); i++) <br />	{<br />		List&lt;string&gt; operands = new List&lt;string&gt;();<br />		long primeSum = primes[i];<br />		operands.Add(primeSum.ToString());<br />		for (int j = i + 1; j &lt; primes.Count(); j++) <br />		{<br />			primeSum += primes[j];<br />			operands.Add(primes[j].ToString());<br />			if (!primeSums.Any(ps =&gt; ps.Key == primeSum) &amp;&amp; primes.Contains(primeSum))<br />			{<br />				primeSums.Add(new KeyValuePair&lt;long, string&gt;(primeSum, String.Join(&quot; + &quot;, operands.ToArray())));<br />			}<br />		}                <br />	}<br /><br />	return primeSums;<br />};<br /><br />Action primesAndSums = () =&gt; { <br />	// generate primes up to 2020<br />	var primes = GeneratePrimes(2020);<br />	// generate arrays of consecutive primes that add up to prime<br />	var primesSummed = GenerateConsecutivePrimeSums(primes.OrderBy(a =&gt; a).ToArray());<br />	// go through the summed primes (dictionary of prime as key, added numbers as value)<br />	// Console.WriteLine formatted results<br />	primesSummed<br />		.OrderBy(ps =&gt; ps.Key)<br />		.ToList()<br />		.ForEach(ps =&gt; Console.WriteLine(ps.Key + &quot; = &quot; + ps.Value));<br />};<br /><br />primesAndSums();</pre><br /><br /><p>&#160;</p><br /><br /><p>The code actually calculates sums of the primes it generates, <a href="http://www.t3rse.com/metadeveloper/primesAndSums.txt">click here</a> for all the other primes which are sums of consecutive primes up to 2020: </p><br /><br /><h3><font color="#0000ff">}</font></h3>  </div>
